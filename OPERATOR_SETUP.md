# PolyHouse - Operator Setup Guide

## For New Operators

This guide is for the PolyHouse team when onboarding new operators.

## Setup Process (15 minutes)

### Step 1: Create Replit Deployment

1. Go to Replit.com
2. Click "Create Repl"
3. Select "Import from GitHub"
4. Repository: `rigix7/PolyHouse`
5. Branch: `main`

### Step 2: Configure Environment Variables

In Replit, set these environment variables:

```bash
# Deployment Configuration
VITE_DEPLOY_MODE=operator
VITE_OPERATOR_ID=<operator-slug>  # e.g., "sportsdao"

# Database (auto-generated by Replit)
DATABASE_URL=<replit-provides-this>

# Polymarket Integration
VITE_POLYMARKET_CLOB_API_KEY=<your-builder-api-key>
POLYMARKET_API_KEY=<backend-api-key>

# Authentication
PRIVY_APP_ID=<your-privy-app-id>
PRIVY_APP_SECRET=<backend-privy-secret>

# Admin Credentials (generate secure password)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=<generate-secure-password>
```

### Step 3: Deploy to Replit

1. Click "Deploy" button in Replit
2. Wait for deployment to complete
3. Note the Replit URL: `<operator-id>.replit.app`

### Step 4: Configure Custom Domain

1. In Replit, go to "Deployment" -> "Domains"
2. Click "Add Custom Domain"
3. Enter operator's domain: `sportsdao.com`
4. Copy DNS configuration

**Send to Operator:**
```
Add these DNS records to your domain:

Type: CNAME
Name: @
Value: <operator-id>.replit.app

Type: CNAME
Name: www
Value: <operator-id>.replit.app
```

5. Wait for DNS propagation (5-60 minutes)
6. Verify SSL certificate is active

### Step 5: Setup Admin Access

**Send to Operator:**
```
Your prediction market is live!

Site: https://sportsdao.com
Admin Panel: https://sportsdao.com/admin

Admin Credentials:
Username: admin
Password: <secure-password>

Next Steps:
1. Log into admin panel
2. Configure your branding (logo, colors, name)
3. Set your fee collection wallet
4. Configure referral strategies
5. Launch!

Support: Discord [link] | Email: support@polyhouse.app
```

### Step 6: Initialize Database

The database will auto-initialize on first run. Verify by checking:

```bash
# In Replit console:
npm run db:migrate
npm run db:seed  # Optional: seed initial data
```

### Step 7: Test Deployment

1. Visit operator's site
2. Verify branding loads correctly
3. Test betting flow:
   - Connect wallet
   - Place test bet
   - Confirm fee collection
4. Test admin panel:
   - Login with admin credentials
   - Verify all settings accessible
   - Test theme changes

## Troubleshooting

### Site won't load
- Check Replit deployment status
- Verify environment variables are set
- Check Replit logs for errors

### Database connection errors
- Verify DATABASE_URL is set
- Check Replit PostgreSQL is enabled
- Run migrations: `npm run db:migrate`

### Betting not working
- Verify Polymarket API keys are correct
- Check Privy configuration
- Verify Safe wallet deployment

### Admin panel not accessible
- Verify ADMIN_PASSWORD is set
- Check if admin user was created
- Reset password if needed: `npm run admin:reset-password`

## Updating Operators

When PolyHouse releases updates:

1. In each operator's Replit:
2. Click "Pull from GitHub" (if auto-pull disabled)
3. Replit will rebuild automatically
4. Verify deployment successful
5. Test critical flows

**OR** enable auto-pull for automatic updates:
- Settings -> GitHub -> Enable "Auto-pull"

## Operator Offboarding

If operator cancels:

1. Pause Replit deployment (don't delete yet)
2. Export their database (backup)
3. Remove custom domain
4. Archive deployment
5. Delete after 30 days (give time to reconsider)
